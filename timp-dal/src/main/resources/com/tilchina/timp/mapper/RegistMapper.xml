<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.tilchina.timp.mapper.RegistMapper" >  <resultMap id="BaseResultMap" type="com.tilchina.timp.model.Regist" >    <id column="REGIST_ID" jdbcType="BIGINT" property="registId" />	<result column="REGIST_ID" jdbcType="BIGINT" property="registId" />	<result column="REGIST_CODE" jdbcType="VARCHAR" property="registCode" />	<result column="REGIST_NAME" jdbcType="VARCHAR" property="registName" />	<result column="URL_PATH" jdbcType="VARCHAR" property="urlPath" />	<result column="REGIST_TYPE" jdbcType="INTEGER" property="registType" />	<result column="ICON" jdbcType="VARCHAR" property="icon" />	<result column="UP_REGIST_ID" jdbcType="BIGINT" property="upRegistId" />	<result column="SEQUENCE" jdbcType="INTEGER" property="sequence" />	<result column="CORP_ID" jdbcType="BIGINT" property="corpId" />	<result column="FLAG" jdbcType="INTEGER" property="flag" />  	<result column="CORP_NAME" jdbcType="VARCHAR" property="refCorpName" />	<result column="UP_REGIST_NAME" jdbcType="VARCHAR" property="refUpRegistName" />	<result column="UP_REGIST_CODE" jdbcType="VARCHAR" property="refUpRegistCode" />  </resultMap>  <sql id="Base_Column_List" >    REGIST_ID, REGIST_CODE, REGIST_NAME, URL_PATH, REGIST_TYPE, ICON, UP_REGIST_ID, SEQUENCE, CORP_ID, FLAG  </sql>  <sql id="Query_Column_List" >  	r.REGIST_ID,r.REGIST_CODE,r.REGIST_NAME,r.URL_PATH,r.REGIST_TYPE,r.ICON,r.UP_REGIST_ID,re.REGIST_NAME AS UP_REGIST_NAME,	re.REGIST_CODE AS UP_REGIST_CODE,r.SEQUENCE,r.CORP_ID,corp.CORP_NAME,r.FLAG  </sql>  <sql id="Dynamic_Column_List" >    r.REGIST_ID,r.REGIST_NAME  </sql>  <sql id="Example_Where_Clause">    where r.del = 0    <trim  suffixOverrides="," >      <if test="registId != null and registId != ''" >        and r.REGIST_ID = #{registId}      </if>      <if test="registCode != null and registCode != ''" >        and r.REGIST_CODE = #{registCode}      </if>      <if test="registName != null and registName != ''" >        and r.REGIST_NAME = #{registName}      </if>      <if test="urlPath != null and urlPath != ''" >        and (r.URL_PATH = #{urlPath}        or r.URL_PATH like concat(concat('%', #{urlPath} ),'%'))      </if>      <if test="registType != null and registType != ''" >        and r.REGIST_TYPE = #{registType}      </if>      <if test="icon != null and icon != ''" >        and r.ICON = #{icon}      </if>      <if test="upRegistId != null and upRegistId != ''" >        and r.UP_REGIST_ID = #{upRegistId}      </if>      <if test="sequence != null and sequence != ''" >        and r.SEQUENCE = #{sequence}      </if>      <if test="corpId != null and corpId != ''" >        and r.CORP_ID = #{corpId}      </if>      <if test="flag != null and flag != ''" >        and r.FLAG = #{flag}      </if>      <if test="searchContent != null and searchContent != ''" >        and  (		  r.REGIST_NAME like  concat(concat('%',#{searchContent}),'%')        or   r.REGIST_CODE like concat(concat('%',#{searchContent}),'%')		  )      </if>		<if test="refRegistName != null and refRegistName != ''" >			and ( r.REGIST_NAME like concat(concat('%',#{refRegistName}),'%'))		</if>		<if test="refRegistCode != null and refRegistCode != ''" >			and ( r.REGIST_CODE like concat(concat('%', #{refRegistCode} ),'%'))		</if>		<if test="refUrlPath != null and refUrlPath != ''" >			and ( r.URL_PATH like concat(concat('%', #{refUrlPath} ),'%'))		</if>    </trim>  </sql>     <select id="selectByPrimaryKey"  resultMap="BaseResultMap" parameterType="java.lang.Long">    select      <include refid="Query_Column_List"/>    FROM sys_regist r	LEFT JOIN sys_regist re ON r.UP_REGIST_ID = re.REGIST_ID	JOIN sys_corp corp ON corp.CORP_ID = r.CORP_ID	 where r.del = 0	 and r.REGIST_ID = #{registId,jdbcType=BIGINT}  </select>  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">    delete  from sys_regist where REGIST_ID = #{registId}  </delete>  <insert id="insert" parameterType="com.tilchina.timp.model.Regist" keyProperty="registId" useGeneratedKeys="true">    insert into sys_regist	(REGIST_CODE, REGIST_NAME, URL_PATH, REGIST_TYPE, ICON, UP_REGIST_ID, SEQUENCE, CORP_ID, FLAG)	values	(#{registCode,jdbcType=VARCHAR}, #{registName,jdbcType=VARCHAR}, #{urlPath,jdbcType=VARCHAR}, #{registType,jdbcType=INTEGER}, 	#{icon,jdbcType=VARCHAR}, #{upRegistId,jdbcType=BIGINT}, #{sequence,jdbcType=INTEGER}, #{corpId,jdbcType=BIGINT}, 	#{flag,jdbcType=INTEGER})  </insert>  <insert id="insertSelective" parameterType="com.tilchina.timp.model.Regist" keyProperty="registId" useGeneratedKeys="true">    insert into sys_regist	<trim prefix="(" suffix=")" suffixOverrides=",">	  <if test="registCode != null">	    REGIST_CODE, 	  </if>	  <if test="registName != null">	    REGIST_NAME, 	  </if>	  <if test="urlPath != null">	    URL_PATH, 	  </if>	  <if test="registType != null">	    REGIST_TYPE, 	  </if>	  <if test="icon != null">	    ICON, 	  </if>	  <if test="upRegistId != null">	    UP_REGIST_ID, 	  </if>	  <if test="sequence != null">	    SEQUENCE, 	  </if>	  <if test="corpId != null">	    CORP_ID, 	  </if>	  <if test="flag != null">	    FLAG, 	  </if>	</trim>	<trim prefix="values (" suffix=")" suffixOverrides=",">	  <if test="registCode != null">	    #{registCode,jdbcType=VARCHAR}, 	  </if>	  <if test="registName != null">	    #{registName,jdbcType=VARCHAR}, 	  </if>	  <if test="urlPath != null">	    #{urlPath,jdbcType=VARCHAR}, 	  </if>	  <if test="registType != null">	    #{registType,jdbcType=INTEGER}, 	  </if>	  <if test="icon != null">	    #{icon,jdbcType=VARCHAR}, 	  </if>	  <if test="upRegistId != null">	    #{upRegistId,jdbcType=BIGINT}, 	  </if>	  <if test="sequence != null">	    #{sequence,jdbcType=INTEGER}, 	  </if>	  <if test="corpId != null">	    #{corpId,jdbcType=BIGINT}, 	  </if>	  <if test="flag != null">	    #{flag,jdbcType=INTEGER}, 	  </if>	</trim>  </insert>  <update id="updateByPrimaryKeySelective" parameterType="com.tilchina.timp.model.Regist" >	update sys_regist	<set>	  <if test="registName != null">	    REGIST_NAME = #{registName,jdbcType=VARCHAR}, 	  </if>        <if test="registCode != null">            REGIST_CODE = #{registCode,jdbcType=VARCHAR},        </if>	  <if test="urlPath != null">	    URL_PATH = #{urlPath,jdbcType=VARCHAR}, 	  </if>	  <if test="registType != null">	    REGIST_TYPE = #{registType,jdbcType=INTEGER}, 	  </if>	  <if test="icon != null">	    ICON = #{icon,jdbcType=VARCHAR}, 	  </if>	  <if test="upRegistId != null">	    UP_REGIST_ID = #{upRegistId,jdbcType=BIGINT}, 	  </if>	  <if test="sequence != null">	    SEQUENCE = #{sequence,jdbcType=INTEGER}, 	  </if>	  <if test="corpId != null">	    CORP_ID = #{corpId,jdbcType=BIGINT}, 	  </if>	  <if test="flag != null">	    FLAG = #{flag,jdbcType=INTEGER}, 	  </if>	</set>	where REGIST_ID = #{registId,jdbcType=BIGINT}  </update>  <update id="updateByPrimaryKey" parameterType="com.tilchina.timp.model.Regist" >    update sys_regist set 	  REGIST_CODE = #{registCode,jdbcType=VARCHAR}, REGIST_NAME = #{registName,jdbcType=VARCHAR}, URL_PATH = #{urlPath,jdbcType=VARCHAR}, 	  REGIST_TYPE = #{registType,jdbcType=INTEGER}, ICON = #{icon,jdbcType=VARCHAR}, UP_REGIST_ID = #{upRegistId,jdbcType=BIGINT}, 	  SEQUENCE = #{sequence,jdbcType=INTEGER}, CORP_ID = #{corpId,jdbcType=BIGINT}, FLAG = #{flag,jdbcType=INTEGER}	where REGIST_ID = #{registId,jdbcType=BIGINT}  </update>   <update id="logicDeleteByPrimaryKey" parameterType="java.lang.Long">    update sys_regist set       DEL = 1    WHERE REGIST_ID = #{registId,jdbcType=BIGINT}  </update>  <update id="logicDeleteByPrimaryKeyList" parameterType="java.lang.Long">    update sys_regist set	  DEL = 1	WHERE REGIST_ID in	<foreach collection="array" item="item" open="(" separator="," close=")">		<if test="item != null and item != ''" >	       #{item,jdbcType=BIGINT}	    </if>	</foreach>  </update>  <select id="selectList" resultMap="BaseResultMap"  parameterType="Object">	select	<include refid="Query_Column_List"/>	FROM sys_regist r	LEFT JOIN sys_regist re ON r.UP_REGIST_ID = re.REGIST_ID	LEFT JOIN sys_corp corp ON corp.CORP_ID = r.CORP_ID	<include refid="Example_Where_Clause"/>	  ORDER BY r.REGIST_ID DESC  </select>  <select id="selectDynamicList" resultMap="BaseResultMap"  parameterType="Object">	select	 <include refid="Dynamic_Column_List"/>      FROM sys_regist  r	 <include refid="Example_Where_Clause"/>		 ORDER BY r.REGIST_ID  </select>	<select id="selectByUserId" resultMap="BaseResultMap"  parameterType="Object">		select a.REGIST_ID, a.REGIST_CODE,a.REGIST_NAME, a.URL_PATH, a.REGIST_TYPE, a.ICON, a.UP_REGIST_ID, a.SEQUENCE		from sys_regist a		join sys_power b on a.regist_id = b.REGIST_ID		join sys_user_group c on b.GROUP_ID = c.GROUP_ID		join bd_user d on d.USER_ID = c.USER_ID		where a.del = 0 and a.flag = 0		<if test="userId != null and userId != ''" >			and d.USER_ID =  #{userId,jdbcType=BIGINT}		</if>        GROUP BY a.REGIST_ID		ORDER BY a.REGIST_ID DESC	</select>	<select id="selectRefer" resultMap="BaseResultMap"  parameterType="Object">		select		r.REGIST_ID,r.REGIST_CODE,r.REGIST_NAME,r.URL_PATH,r.REGIST_TYPE,r.ICON,r.UP_REGIST_ID,re.REGIST_NAME AS UP_REGIST_NAME,		r.SEQUENCE,r.CORP_ID,corp.CORP_NAME		FROM sys_regist r		LEFT JOIN sys_regist re ON r.UP_REGIST_ID = re.REGIST_ID		LEFT JOIN sys_corp corp ON corp.CORP_ID = r.CORP_ID		<include refid="Example_Where_Clause"/>		ORDER BY r.REGIST_ID DESC	</select>	<select id="selectByRegistId" resultMap="BaseResultMap"  parameterType="List">		select			REGIST_ID, REGIST_CODE, REGIST_NAME, URL_PATH, REGIST_TYPE, ICON, UP_REGIST_ID, SEQUENCE		FROM sys_regist		where DEL = 0 and flag = 0		<if test="registIds != null and registIds.size > 0" >			AND REGIST_ID in			<foreach collection="registIds" separator="," item="registId" open="(" close=")">				#{registId}			</foreach>		</if>	</select>    <select id="selectByDownList" resultMap="BaseResultMap"  parameterType="Object">        select 		r.REGIST_ID,r.REGIST_CODE,r.REGIST_NAME,r.URL_PATH,r.REGIST_TYPE,r.ICON,r.UP_REGIST_ID,re.REGIST_NAME AS UP_REGIST_NAME,	    re.REGIST_CODE AS UP_REGIST_CODE,r.SEQUENCE        FROM sys_regist r        LEFT JOIN sys_regist re ON r.UP_REGIST_ID = re.REGIST_ID       where  r.DEL = 0 AND  r.FLAG = 0          AND  r.REGIST_TYPE = 2          AND   r.UP_REGIST_ID = #{upRegistId,jdbcType=BIGINT}        ORDER BY  r.REGIST_ID DESC    </select>	<select id="selectByRegistCode" resultMap="BaseResultMap"  parameterType="Object">        select 		r.REGIST_ID,r.REGIST_CODE,r.REGIST_NAME,r.URL_PATH,r.REGIST_TYPE,r.ICON,r.UP_REGIST_ID,re.REGIST_NAME AS UP_REGIST_NAME,	    re.REGIST_CODE AS UP_REGIST_CODE,r.SEQUENCE        FROM sys_regist r        LEFT JOIN sys_regist re ON r.UP_REGIST_ID = re.REGIST_ID       where  r.DEL = 0 AND  r.FLAG = 0          AND   r.REGIST_CODE = #{registCode,jdbcType=VARCHAR}      order by r.REGIST_ID desc limit 1    </select></mapper>