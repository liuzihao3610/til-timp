<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.tilchina.timp.mapper.CommonDamageMapper">	<resultMap id="BaseResultMap" type="com.tilchina.timp.model.CommonDamage">		<id column="DAMAGE_ID" jdbcType="BIGINT" property="damageId"/>		<result column="DAMAGE_ID" jdbcType="BIGINT" property="damageId"/>		<result column="TRANSPORT_ORDER_ID" jdbcType="BIGINT" property="transportOrderId"/>		<result column="DAMAGE_CODE" jdbcType="VARCHAR" property="damageCode"/>		<result column="DAMAGE_DATE" jdbcType="TIMESTAMP" property="damageDate"/>		<result column="CAR_VIN" jdbcType="VARCHAR" property="carVin"/>		<result column="CAR_BRAND_ID" jdbcType="BIGINT" property="carBrandId"/>		<result column="VOYAGE_NUMBER" jdbcType="VARCHAR" property="voyageNumber"/>		<result column="CREATOR" jdbcType="BIGINT" property="creator"/>		<result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate"/>		<result column="CORP_ID" jdbcType="BIGINT" property="corpId"/>		<result column="FLAG" jdbcType="INTEGER" property="flag"/>		<result column="refCreatorName" jdbcType="VARCHAR" property="refCreatorName"/>		<result column="refCorpName" jdbcType="VARCHAR" property="refCorpName"/>		<result column="refCarBrandName" jdbcType="VARCHAR" property="refCarBrandName"/>		<result column="refTransOrderCode" jdbcType="VARCHAR" property="refTransOrderCode"/>	</resultMap>	<sql id="Base_Column_List">    self.DAMAGE_ID,    self.TRANSPORT_ORDER_ID,	self.DAMAGE_CODE,	self.DAMAGE_DATE,	self.CAR_VIN,	self.CAR_BRAND_ID,	self.VOYAGE_NUMBER,	self.CREATOR,	self.CREATE_DATE,	self.CORP_ID,	self.FLAG,	user.USER_NAME as refCreatorName,	corp.CORP_NAME as refCorpName,	brand.BRAND_NAME as refCarBrandName,	tod.TRANSPORT_ORDER_CODE as refTransOrderCode  </sql>	<sql id="Example_Where_Clause">		where self.DEL = 0		<trim suffixOverrides=",">			<if test="damageId != null and damageId != ''">				and self.DAMAGE_ID = #{damageId}			</if>			<if test="damageCode != null and damageCode != ''">				and				(				self.DAMAGE_CODE = #{damageCode} or				self.DAMAGE_CODE like concat('%', #{damageCode}, '%')				)			</if>			<if test="damageDate != null and damageDate != ''">				and self.DAMAGE_DATE like concat('%', #{damageDate}, '%')			</if>			<if test="carVin != null and carVin != ''">				and				(				self.CAR_VIN = #{carVin} or				self.CAR_VIN like concat('%', #{carVin}, '%')				)			</if>			<if test="carBrandId != null and carBrandId != ''">				and self.CAR_BRAND_ID = #{carBrandId}			</if>			<if test="voyageNumber != null and voyageNumber != ''">				and				(				self.VOYAGE_NUMBER = #{voyageNumber} or				self.VOYAGE_NUMBER like concat('%', #{voyageNumber}, '%')				)			</if>			<if test="creator != null and creator != ''">				and self.CREATOR = #{creator}			</if>			<if test="createDate != null and createDate != ''">				and self.CREATE_DATE = #{createDate}			</if>			<if test="corpId != null and corpId != ''">				and self.CORP_ID = #{corpId}			</if>			<if test="flag != null and flag != ''">				and self.FLAG = #{flag}			</if>			<if test="searchContent != null and searchContent != ''">				and				(				self.DAMAGE_CODE like concat('%', #{searchContent}, '%') or				self.CAR_VIN like concat('%', #{searchContent}, '%')				)			</if>			<if test="startTime != null and startTime != ''">				<![CDATA[ and self.CREATE_DATE >= #{startTime} ]]>			</if>			<if test="endTime != null and endTime != ''">				<![CDATA[ and self.CREATE_DATE <= #{endTime} ]]>			</if>			<if test="damageDegree != null and damageDegree != ''">				and detail.DAMAGE_DEGREE = #{damageDegree}			</if>		</trim>	</sql>	<select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">		select		<include refid="Base_Column_List"/>		from sq_common_damage self		left join bd_user user on self.CREATOR = user.USER_ID		left join sys_corp corp on self.CORP_ID = corp.CORP_ID		left join bd_brand brand on self.CAR_BRAND_ID = brand.BRAND_ID		left join om_transport_order_detail tod on self.CAR_VIN = tod.CAR_VIN		where self.DAMAGE_ID = #{damageId,jdbcType=BIGINT}		and self.DEL = 0 limit 1	</select>	<update id="deleteByPrimaryKey" parameterType="java.lang.Long">		update sq_common_damage		set DEL = 1		where DAMAGE_ID = #{damageId}  	</update>	<insert id="insert" parameterType="com.tilchina.timp.model.CommonDamage" keyProperty="damageId"	        useGeneratedKeys="true">	    insert into sq_common_damage		(DAMAGE_CODE, DAMAGE_DATE, CAR_VIN, CAR_BRAND_ID, VOYAGE_NUMBER, CREATOR, CREATE_DATE, CORP_ID, FLAG)		values		(#{damageCode,jdbcType=VARCHAR}, #{damageDate,jdbcType=TIMESTAMP}, #{carVin,jdbcType=VARCHAR}, #{carBrandId,jdbcType=BIGINT},		#{voyageNumber,jdbcType=VARCHAR}, #{creator,jdbcType=BIGINT}, #{createDate,jdbcType=TIMESTAMP}, #{corpId,jdbcType=BIGINT},		#{flag,jdbcType=INTEGER})  	</insert>	<insert id="insertSelective" parameterType="com.tilchina.timp.model.CommonDamage" keyProperty="damageId"	        useGeneratedKeys="true">		insert into sq_common_damage		<trim prefix="(" suffix=")" suffixOverrides=",">			<if test="transportOrderId != null">				TRANSPORT_ORDER_ID,			</if>			<if test="damageCode != null">				DAMAGE_CODE,			</if>			<if test="damageDate != null">				DAMAGE_DATE,			</if>			<if test="carVin != null">				CAR_VIN,			</if>			<if test="carBrandId != null">				CAR_BRAND_ID,			</if>			<if test="voyageNumber != null">				VOYAGE_NUMBER,			</if>			<if test="creator != null">				CREATOR,			</if>			<if test="createDate != null">				CREATE_DATE,			</if>			<if test="corpId != null">				CORP_ID,			</if>			<if test="flag != null">				FLAG,			</if>		</trim>		<trim prefix="values (" suffix=")" suffixOverrides=",">			<if test="transportOrderId != null">				#{transportOrderId, jdbcType=BIGINT},			</if>			<if test="damageCode != null">				#{damageCode,jdbcType=VARCHAR},			</if>			<if test="damageDate != null">				#{damageDate,jdbcType=TIMESTAMP},			</if>			<if test="carVin != null">				#{carVin,jdbcType=VARCHAR},			</if>			<if test="carBrandId != null">				#{carBrandId,jdbcType=BIGINT},			</if>			<if test="voyageNumber != null">				#{voyageNumber,jdbcType=VARCHAR},			</if>			<if test="creator != null">				#{creator,jdbcType=BIGINT},			</if>			<if test="createDate != null">				#{createDate,jdbcType=TIMESTAMP},			</if>			<if test="corpId != null">				#{corpId,jdbcType=BIGINT},			</if>			<if test="flag != null">				#{flag,jdbcType=INTEGER},			</if>		</trim>	</insert>	<update id="updateByPrimaryKeySelective" parameterType="com.tilchina.timp.model.CommonDamage">		update sq_common_damage		<set>			<if test="damageCode != null">				DAMAGE_CODE = #{damageCode,jdbcType=VARCHAR},			</if>			<if test="damageDate != null">				DAMAGE_DATE = #{damageDate,jdbcType=TIMESTAMP},			</if>			<if test="carVin != null">				CAR_VIN = #{carVin,jdbcType=VARCHAR},			</if>			<if test="carBrandId != null">				CAR_BRAND_ID = #{carBrandId,jdbcType=BIGINT},			</if>			<if test="voyageNumber != null">				VOYAGE_NUMBER = #{voyageNumber,jdbcType=VARCHAR},			</if>			<if test="creator != null">				CREATOR = #{creator,jdbcType=BIGINT},			</if>			<if test="createDate != null">				CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},			</if>			<if test="corpId != null">				CORP_ID = #{corpId,jdbcType=BIGINT},			</if>			<if test="flag != null">				FLAG = #{flag,jdbcType=INTEGER},			</if>		</set>		where DAMAGE_ID = #{damageId,jdbcType=BIGINT}	</update>	<update id="updateByPrimaryKey" parameterType="com.tilchina.timp.model.CommonDamage">    update sq_common_damage set 	  DAMAGE_CODE = #{damageCode,jdbcType=VARCHAR}, DAMAGE_DATE = #{damageDate,jdbcType=TIMESTAMP}, CAR_VIN = #{carVin,jdbcType=VARCHAR}, 	  CAR_BRAND_ID = #{carBrandId,jdbcType=BIGINT}, VOYAGE_NUMBER = #{voyageNumber,jdbcType=VARCHAR}, CREATOR = #{creator,jdbcType=BIGINT}, 	  CREATE_DATE = #{createDate,jdbcType=TIMESTAMP}, CORP_ID = #{corpId,jdbcType=BIGINT}, 	  FLAG = #{flag,jdbcType=INTEGER}	where DAMAGE_ID = #{damageId,jdbcType=BIGINT}  </update>	<sql id="Query_Column_List">		self.DAMAGE_ID,		self.TRANSPORT_ORDER_ID,		self.DAMAGE_CODE,		self.DAMAGE_DATE,		self.CAR_VIN,		self.CAR_BRAND_ID,		self.VOYAGE_NUMBER,		self.CREATOR,		self.CREATE_DATE,		self.CORP_ID,		self.FLAG,		user.USER_NAME as refCreatorName,		corp.CORP_NAME as refCorpName,		brand.BRAND_NAME as refCarBrandName,		ord.TRANSPORT_ORDER_CODE as refTransOrderCode	</sql>	<select id="selectList" resultMap="BaseResultMap" parameterType="Object">		select		<include refid="Query_Column_List"/>		from sq_common_damage self		left join sq_common_damage_detail detail on self.DAMAGE_ID = detail.DAMAGE_ID		left join bd_user user on self.CREATOR = user.USER_ID		left join sys_corp corp on self.CORP_ID = corp.CORP_ID		left join bd_brand brand on self.CAR_BRAND_ID = brand.BRAND_ID		left join om_transport_order ord on self.TRANSPORT_ORDER_ID = ord.TRANSPORT_ORDER_ID		<include refid="Example_Where_Clause"/>		group by self.DAMAGE_ID		order by self.CREATE_DATE DESC	</select>	<select id="getByCarVin" parameterType="java.lang.String" resultMap="BaseResultMap">		select		<include refid="Base_Column_List"/>		from sq_common_damage self		left join bd_user user on self.CREATOR = user.USER_ID		left join sys_corp corp on self.CORP_ID = corp.CORP_ID		left join bd_brand brand on self.CAR_BRAND_ID = brand.BRAND_ID		left join om_transport_order_detail tod on self.CAR_VIN = tod.CAR_VIN		<where>			<if test="_parameter != null">				self.CAR_VIN = #{carVin}				and self.DEL = 0 limit 1			</if>		</where>	</select>	<select id="queryByIds" parameterType="java.util.Map" resultMap="BaseResultMap">		select		<include refid="Base_Column_List"/>		from sq_common_damage self		left join sq_common_damage_detail detail on self.DAMAGE_ID = detail.DAMAGE_ID		left join bd_user user on self.CREATOR = user.USER_ID		left join sys_corp corp on self.CORP_ID = corp.CORP_ID		left join bd_brand brand on self.CAR_BRAND_ID = brand.BRAND_ID		left join om_transport_order tod on self.TRANSPORT_ORDER_ID = tod.TRANSPORT_ORDER_ID		<include refid="Example_Where_Clause"/>		<if test="_parameter != null">			and detail.DEL = 0		</if>		<if test="lowerCorpIds.size > 0">			and self.CORP_ID in			<foreach item="lowerCorpId" index="index" collection="lowerCorpIds" open="(" separator="," close=")">				#{lowerCorpId}			</foreach>		</if>		group by self.DAMAGE_ID		order by self.CREATE_DATE DESC	</select></mapper>   